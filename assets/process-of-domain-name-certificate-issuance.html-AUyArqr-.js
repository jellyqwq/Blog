import{_ as n}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as p,c as r,b as o,d as e,e as a,a as s}from"./app-XoEOURcT.js";const l={},d=o("p",null,"给域名上证书签名提高流量的安全性, 也能减少打开网站时提示不安全影响浏览体验, 但是通过常规的方式如通过小马哥家的证书签名有配额限制, 而且销毁了也不减少签发额度.",-1),i={href:"https://oneinstack.com/install/",target:"_blank",rel:"noopener noreferrer"},u=o("code",null,"nginx",-1),_=o("code",null,"mysql",-1),k=o("code",null,"mongodb",-1),m=s("<p>如不熟悉nginx操作就不要修改其默认的安装的nginx的配置文件, 默认的nginx路径可以通过 <code>nginx -t</code> 命令查看, 一般在 <code>/usr/local/nginx</code></p><p>在<strong>OneinStack</strong>目录里找到<code>vhost.sh</code>的文件, 这个就是给域名签发证书用的, 它签发的证书有效期只有几个月, 但是它会自动续签, 这点还是比较方便的</p><p>在开始证书签发前还需要去该域名的提供商处添加你要解析的域名, 否则签发证书会失败, 添加完后要等待一段时间</p><p>在该<strong>OneinStack</strong>目录中执行 <code>./vhost.sh</code> 开始对域名签发证书</p><p>运行后会有几个选项, 选择<code>Use Let&#39;s Encrypt to Create SSL Certificate and Key</code>来开始对域名进行签名</p><p>然后要求输入待签名的域名</p><p>接着提示是否要更改该域名的网站目录, 默认目录为<code>/data/wwwroot/your-domain</code>, 不建议更改, 直接回车</p><blockquote><p>Do you want to add more domain name? [y/n]</p></blockquote><p>一般情况填 <code>n</code> 即可</p><blockquote><p>Do you want to redirect all HTTP requests to HTTPS? [y/n]</p></blockquote><p>一般填 <code>y</code>, 这个是对http流量的重定向, 体现在nginx的配置中</p><blockquote><p>Please enter your cert key length (default 2048):</p></blockquote><p>按需更改, 一般回车</p><p>这步回车完后就是开始签发, 然后到选项</p><blockquote><p>Do you want to add hotlink protection? [y/n]</p></blockquote><p>一般填 <code>n</code></p><blockquote><p>Allow Rewrite rule? [y/n]</p></blockquote><p>一般填 <code>y</code>, 接着会有如下输入</p><blockquote><p>Please input rewrite of programme: ...... (Default rewrite other):</p></blockquote><p>这里要讲究下, 填要签发的域名, 这步就相当于给当前签发域名提供了一个自定义配置的文件, 他们都会生成在 <code>/usr/local/nginx/rewrite</code> 这个目录当中, 并以上述的输入 <code>x</code> 作为文件名 <code>x.conf</code></p><blockquote><p>Allow Nginx/Tengine/OpenResty access_log? [y/n]</p></blockquote><p>这个各取所需, 是否让nginx保留日志, 我用的 <code>n</code></p>",22);function g(f,h){const t=c("ExternalLinkIcon");return p(),r("div",null,[d,o("p",null,[e("这个时候就需要用到一些其他的工具, 使用"),o("a",i,[e("OneinStack"),a(t)]),e("可以方便地对服务器的基础服务进行部署, 如 "),u,e(", "),_,e(", "),k,e("...")]),m])}const y=n(l,[["render",g],["__file","process-of-domain-name-certificate-issuance.html.vue"]]);export{y as default};
